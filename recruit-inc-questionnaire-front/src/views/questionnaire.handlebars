<div class="row">

    <div class="col-lg-12">

        {{!-- get the group type as a title for this step in the questionnaire --}}
        <h2>{{questionGroup.type}}</h2>

        <form action="/questionnaire" method="post">

            {{!-- hidden values that are submitted on every post [name / step] --}}
            <input type="text" value="{{name}}" name="name" style="display: none">
            <input type="text" value="{{step}}" name="step" style="display: none">

            {{!-- loop through each question in the group and display the questions string --}}
            {{#each questionGroup.questions}}
                <h5>{{this.question}}</h5>
                <div>
                    <fieldset id="{{this._id}}" class="m-4">
                        {{!-- loop through each answer in the question and display the answer as a radio button --}}
                        {{#each this.answers}}

                        {{!-- to ensure radio buttons are part of the same radio group they must share the same name - in this case the question id --}}
                            <label>
                                <input type="radio" name="{{../_id}}" id="{{this.answer}}" autocomplete="off"
                                       value="{{this.answer}}" required>
                                {{this.answer}}
                            </label>
                            <br>

                        {{/each}}
                    </fieldset>
                </div>
            {{/each}}

            <div class="text-right">
                {{!-- if we're on the last step then show a submit button else show a next button --}}
                {{#if isLastStep}}
                    <button type="submit" class="btn btn-primary">Submit</button>
                {{else}}
                    <button type="submit" class="btn btn-primary">Next</button>
                {{/if}}
            </div>

        </form>
    </div>

</div>


<script type="text/javascript">
    // warn the candidate if they refresh the page they may lose their progress
    window.onbeforeunload = function () {
        return 'Refreshing this page will restart the questionnaire. Are you sure?';
    }
</script>